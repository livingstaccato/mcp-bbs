{
  "version": "1.0",
  "game": "tw2002",
  "metadata": {
    "description": "Trade Wars 2002 standardized prompt/menu rules",
    "updated_at": "2026-02-04T00:25:00Z"
  },
  "prompts": [
    {
      "id": "prompt.login_name",
      "kind": "login_name",
      "input_type": "multi_key",
      "match": {
        "pattern": "(?i)(enter|type)\\s+(your\\s+)?(name|user\\s*name|handle|alias)",
        "match_mode": "regex"
      },
      "notes": "Username/handle prompt at login"
    },
    {
      "id": "prompt.login_password",
      "kind": "login_pass",
      "input_type": "multi_key",
      "match": {
        "pattern": "(?i)(enter|type)\\s+(your\\s+)?password\\s*:?\\s*$",
        "match_mode": "regex"
      },
      "notes": "Password prompt at login"
    },
    {
      "id": "prompt.press_any_key",
      "kind": "pause",
      "input_type": "any_key",
      "match": {
        "pattern": "(?i)press\\s+any\\s+key\\s+to\\s+continue",
        "match_mode": "regex"
      },
      "screen": {
        "expect_cursor_at_end": false
      },
      "notes": "Common pause prompt"
    },
    {
      "id": "prompt.pause_space_or_enter",
      "kind": "pause",
      "input_type": "any_key",
      "match": {
        "pattern": "(?i)\\[pause\\].*press\\s+space\\s+or\\s+enter",
        "match_mode": "regex"
      },
      "screen": {
        "expect_cursor_at_end": false
      },
      "notes": "TW2002 pause prompt"
    },
    {
      "id": "prompt.pause_simple",
      "kind": "pause",
      "input_type": "any_key",
      "match": {
        "pattern": "(?i)\\[pause\\]",
        "match_mode": "regex"
      },
      "screen": {
        "expect_cursor_at_end": false
      },
      "notes": "Simple [Pause] anywhere on screen"
    },
    {
      "id": "prompt.tw_game_menu",
      "kind": "menu",
      "input_type": "single_key",
      "match": {
        "pattern": "(?i)enter your choice\\s*:?\\s*$",
        "match_mode": "regex"
      },
      "screen": {
        "expect_cursor_at_end": false
      },
      "notes": "TW2002 game menu (T to play, etc.)"
    },
    {
      "id": "prompt.yes_no",
      "kind": "confirm",
      "input_type": "single_key",
      "match": {
        "pattern": "(?i)\\(y/n\\)|\\[y/n\\]|\\(yes/no\\)",
        "match_mode": "regex"
      },
      "notes": "Yes/No confirmation"
    },
    {
      "id": "prompt.show_todays_log",
      "kind": "confirm",
      "input_type": "single_key",
      "match": {
        "pattern": "(?i)show\\s+today'?s\\s+log\\?\\s*\\(y/n\\)",
        "match_mode": "regex"
      },
      "notes": "Daily log prompt"
    },
    {
      "id": "prompt.include_timestamp",
      "kind": "confirm",
      "input_type": "single_key",
      "match": {
        "pattern": "(?i)include\\s+time/date\\s+stamp\\?\\s*\\(y/n\\)",
        "match_mode": "regex"
      },
      "notes": "Include time/date stamp"
    },
    {
      "id": "prompt.private_game_password",
      "kind": "login_pass",
      "input_type": "multi_key",
      "match": {
        "pattern": "(?i)this\\s+is\\s+a\\s+private\\s+game\\.\\s+please\\s+enter\\s+a\\s+password",
        "match_mode": "regex"
      },
      "negative_match": {
        "pattern": "(?i)invalid\\s+password",
        "match_mode": "regex"
      },
      "notes": "TWGS private game password"
    },
    {
      "id": "prompt.use_ansi_graphics",
      "kind": "confirm",
      "input_type": "single_key",
      "match": {
        "pattern": "(?i)use\\s+ansi\\s+graphics\\?",
        "match_mode": "regex"
      },
      "notes": "ANSI graphics toggle"
    },
    {
      "id": "prompt.game_password",
      "kind": "game_pass",
      "input_type": "multi_key",
      "match": {
        "pattern": "(?i)^password\\?\\s*$",
        "match_mode": "regex"
      },
      "notes": "In-game password prompt"
    },
    {
      "id": "prompt.enter_number",
      "kind": "input",
      "input_type": "multi_key",
      "match": {
        "pattern": "(?i)enter\\s+(a\\s+)?number\\s*:?\\s*$",
        "match_mode": "regex"
      },
      "notes": "Numeric input prompt"
    },
    {
      "id": "prompt.command_generic",
      "kind": "menu",
      "input_type": "single_key",
      "match": {
        "pattern": "(?i)command\\s*[:\\?]",
        "match_mode": "regex"
      },
      "notes": "Generic command prompt"
    },
    {
      "id": "prompt.sector_command",
      "kind": "menu",
      "input_type": "single_key",
      "match": {
        "pattern": "(?i)sector\\s+command\\s*[\\[\\(:]?\\s*\\??\\s*$",
        "match_mode": "regex"
      },
      "kv_extract": [
        {
          "field": "sector",
          "type": "int",
          "regex": "Sector\\s+(\\d+)",
          "validate": {
            "min": 1,
            "max": 1000
          },
          "required": true
        },
        {
          "field": "credits",
          "type": "int",
          "regex": "Credits?:\\s*([\\d,]+)",
          "validate": {
            "min": 0
          },
          "required": true
        }
      ],
      "notes": "Sector command prompt - with validated sector/credits extraction"
    },
    {
      "id": "prompt.planet_command",
      "kind": "menu",
      "input_type": "single_key",
      "match": {
        "pattern": "(?i)planet\\s+command\\s*[\\[\\(:]?\\s*\\??\\s*$",
        "match_mode": "regex"
      },
      "notes": "Planet command prompt"
    },
    {
      "id": "prompt.menu_selection",
      "kind": "menu",
      "input_type": "single_key",
      "match": {
        "pattern": "(?i)selection\\s*\\(.*\\)?:?\\s*$",
        "match_mode": "regex"
      },
      "notes": "Generic selection prompt"
    },
    {
      "id": "prompt.more",
      "kind": "pause",
      "input_type": "any_key",
      "match": {
        "pattern": "(?i)(--\\s*more\\s*--|<more>|\\[more\\]|\\(more\\))",
        "match_mode": "regex"
      },
      "screen": {
        "expect_cursor_at_end": false
      },
      "notes": "Pagination"
    },
    {
      "id": "prompt.any_key",
      "kind": "pause",
      "input_type": "any_key",
      "match": {
        "pattern": "(?i)\\[any key\\]",
        "match_mode": "regex"
      },
      "notes": "ANY KEY pause prompt"
    },
    {
      "id": "prompt.port_menu",
      "kind": "menu",
      "input_type": "single_key",
      "match": {
        "pattern": "(?i)enter your choice \\[t\\] \\?",
        "match_mode": "regex"
      },
      "kv_extract": [
        {
          "field": "sector",
          "type": "int",
          "regex": "Sector\\s+(\\d+)",
          "validate": {
            "min": 1,
            "max": 1000
          },
          "required": true
        },
        {
          "field": "port_name",
          "type": "string",
          "regex": "Port:\\s+([\\w\\s]+?)(?:[\\[\\(]|$)"
        }
      ],
      "notes": "Port action menu - with validated sector extraction"
    },
    {
      "id": "prompt.autopilot_engage",
      "kind": "confirm",
      "input_type": "single_key",
      "match": {
        "pattern": "(?i)engage the autopilot\\?",
        "match_mode": "regex"
      },
      "notes": "Autopilot prompt"
    },
    {
      "id": "prompt.stop_in_sector",
      "kind": "confirm",
      "input_type": "single_key",
      "match": {
        "pattern": "(?i)stop in this sector",
        "match_mode": "regex"
      },
      "notes": "Stop-in-sector prompt during autopilot"
    },
    {
      "id": "prompt.navpoint_menu",
      "kind": "menu",
      "input_type": "single_key",
      "match": {
        "pattern": "(?i)choose navpoint",
        "match_mode": "regex"
      },
      "notes": "NavPoint selection menu"
    },
    {
      "id": "prompt.navpoint_settings",
      "kind": "menu",
      "input_type": "single_key",
      "match": {
        "pattern": "(?i)navpoint settings",
        "match_mode": "regex"
      },
      "notes": "NavPoint settings menu"
    },
    {
      "id": "prompt.stardock_buy",
      "kind": "menu",
      "input_type": "single_key",
      "match": {
        "pattern": "(?i)which item do you wish to buy\\?",
        "match_mode": "regex"
      },
      "notes": "StarDock purchase menu"
    },
    {
      "id": "prompt.twgs_select_game",
      "kind": "menu",
      "input_type": "single_key",
      "match": {
        "pattern": "(?i)select\\s+game",
        "match_mode": "regex"
      },
      "notes": "TWGS game selection menu"
    },
    {
      "id": "prompt.port_quantity",
      "kind": "input",
      "input_type": "multi_key",
      "match": {
        "pattern": "(?i)how many.*units",
        "match_mode": "regex"
      },
      "notes": "Port buy/sell quantity prompt"
    },
    {
      "id": "prompt.port_price",
      "kind": "input",
      "input_type": "multi_key",
      "match": {
        "pattern": "(?i)offer.*price",
        "match_mode": "regex"
      },
      "notes": "Port commodity price prompt"
    },
    {
      "id": "prompt.port_action",
      "kind": "menu",
      "input_type": "single_key",
      "match": {
        "pattern": "(?i)\\[t\\].*transaction",
        "match_mode": "regex"
      },
      "notes": "Port action menu (T for transaction)"
    },
    {
      "id": "prompt.warp_sector",
      "kind": "input",
      "input_type": "multi_key",
      "match": {
        "pattern": "(?i)enter.*sector",
        "match_mode": "regex"
      },
      "kv_extract": [
        {
          "field": "current_sector",
          "type": "int",
          "regex": "Sector\\s+(\\d+)",
          "validate": {
            "min": 1,
            "max": 1000
          }
        }
      ],
      "notes": "Warping - enter destination sector with current sector context"
    },
    {
      "id": "prompt.start_over",
      "kind": "pause",
      "input_type": "any_key",
      "match": {
        "pattern": "(?i)start over from scratch",
        "match_mode": "regex"
      },
      "notes": "Death screen prompt"
    },
    {
      "id": "prompt.ship_name",
      "kind": "input",
      "input_type": "multi_key",
      "match": {
        "pattern": "(?i)what do you want to name your ship",
        "match_mode": "regex"
      },
      "notes": "TW2002 new character ship naming prompt"
    },
    {
      "id": "prompt.name_or_bbs",
      "kind": "menu",
      "input_type": "single_key",
      "match": {
        "pattern": "(?i)\\(n\\)ew name or \\(b\\)bs name",
        "match_mode": "regex"
      },
      "notes": "TW2002 new character name selection (N for new, B for BBS)"
    },
    {
      "id": "prompt.what_is_your_name",
      "kind": "input",
      "input_type": "multi_key",
      "match": {
        "pattern": "(?i)what is your name\\??",
        "match_mode": "regex"
      },
      "notes": "TW2002 character name prompt"
    },
    {
      "id": "tedit.admin_password",
      "kind": "login_pass",
      "input_type": "multi_key",
      "match": {
        "pattern": "(?i)password\\s*:\\s*$",
        "match_mode": "regex"
      },
      "notes": "TEDIT admin password prompt"
    },
    {
      "id": "tedit.main_menu",
      "kind": "menu",
      "input_type": "single_key",
      "match": {
        "pattern": "(?i)Trade Wars 2002.*Editor.*\\[\\?\\]",
        "match_mode": "regex"
      },
      "notes": "TEDIT main menu"
    },
    {
      "id": "tedit.select_game",
      "kind": "menu",
      "input_type": "single_key",
      "match": {
        "pattern": "(?i)(select|choose)\\s+(a\\s+)?game",
        "match_mode": "regex"
      },
      "notes": "TEDIT game slot selection"
    },
    {
      "id": "tedit.general_editor_one",
      "kind": "menu",
      "input_type": "single_key",
      "match": {
        "pattern": "(?i)General Editor One.*\\[Q\\]",
        "match_mode": "regex"
      },
      "kv_extract": [
        {
          "field": "turns_per_day",
          "type": "int",
          "regex": "<A>\\s*Turns per day\\s*:\\s*(\\d+)"
        },
        {
          "field": "initial_fighters",
          "type": "int",
          "regex": "<B>\\s*Initial fighters\\s*:\\s*(\\d+)"
        },
        {
          "field": "initial_credits",
          "type": "int",
          "regex": "<C>\\s*Initial credits\\s*:\\s*(\\d+)"
        },
        {
          "field": "initial_holds",
          "type": "int",
          "regex": "<D>\\s*Initial holds\\s*:\\s*(\\d+)"
        },
        {
          "field": "max_planets_per_sector",
          "type": "int",
          "regex": "<M>\\s*Max planets per sector\\s*:\\s*(\\d+)"
        },
        {
          "field": "max_traders_per_corp",
          "type": "int",
          "regex": "<N>\\s*Max traders per corp\\s*:\\s*(\\d+)"
        }
      ],
      "notes": "TEDIT General Editor One - core game settings"
    },
    {
      "id": "tedit.general_editor_two",
      "kind": "menu",
      "input_type": "single_key",
      "match": {
        "pattern": "(?i)General Editor Two.*\\[Q\\]",
        "match_mode": "regex"
      },
      "kv_extract": [
        {
          "field": "inactivity_timeout",
          "type": "int",
          "regex": "<2>\\s*Inactivity Timeout\\s*:\\s*(\\d+)"
        },
        {
          "field": "port_regen_rate",
          "type": "int",
          "regex": "<7>\\s*Port Regeneration Rate\\s*:\\s*(\\d+)"
        },
        {
          "field": "max_regen_per_visit",
          "type": "int",
          "regex": "<8>\\s*Max Regen Per Visit\\s*:\\s*(\\d+)"
        },
        {
          "field": "max_bank_credits",
          "type": "int",
          "regex": "<T>\\s*Max Bank Credits\\s*:\\s*([\\d,]+)"
        },
        {
          "field": "cloak_fail_rate",
          "type": "int",
          "regex": "<U>\\s*Cloaking Fail Rate\\s*:\\s*(\\d+)"
        },
        {
          "field": "navhaz_dispersion",
          "type": "int",
          "regex": "<V>\\s*NavHaz Dispersion\\s*:\\s*(\\d+)"
        }
      ],
      "notes": "TEDIT General Editor Two - advanced settings"
    },
    {
      "id": "tedit.general_editor_three",
      "kind": "menu",
      "input_type": "single_key",
      "match": {
        "pattern": "(?i)General Editor Three.*\\[Q\\]",
        "match_mode": "regex"
      },
      "notes": "TEDIT General Editor Three"
    },
    {
      "id": "tedit.user_editor",
      "kind": "menu",
      "input_type": "single_key",
      "match": {
        "pattern": "(?i)User Editor.*\\[Q\\]",
        "match_mode": "regex"
      },
      "kv_extract": [
        {
          "field": "player_name",
          "type": "string",
          "regex": "<A>\\s*Player Name\\s*:\\s*(.+?)\\s*$"
        },
        {
          "field": "sector",
          "type": "int",
          "regex": "<C>\\s*Sector\\s*:\\s*(\\d+)"
        },
        {
          "field": "fighters",
          "type": "int",
          "regex": "<D>\\s*Fighters\\s*:\\s*(\\d+)"
        },
        {
          "field": "shields",
          "type": "int",
          "regex": "<E>\\s*Shields\\s*:\\s*(\\d+)"
        },
        {
          "field": "credits",
          "type": "int",
          "regex": "<G>\\s*Credits\\s*:\\s*([\\d,]+)"
        },
        {
          "field": "turns",
          "type": "int",
          "regex": "<I>\\s*Turns\\s*:\\s*(\\d+)"
        }
      ],
      "notes": "TEDIT User Editor - player data"
    },
    {
      "id": "tedit.port_editor",
      "kind": "menu",
      "input_type": "single_key",
      "match": {
        "pattern": "(?i)Port Editor.*\\[Q\\]",
        "match_mode": "regex"
      },
      "kv_extract": [
        {
          "field": "port_class",
          "type": "int",
          "regex": "<A>\\s*Port Class\\s*:\\s*(\\d+)"
        },
        {
          "field": "fuel_ore",
          "type": "int",
          "regex": "<B>\\s*Fuel Ore\\s*:\\s*([\\d,]+)"
        },
        {
          "field": "organics",
          "type": "int",
          "regex": "<C>\\s*Organics\\s*:\\s*([\\d,]+)"
        },
        {
          "field": "equipment",
          "type": "int",
          "regex": "<D>\\s*Equipment\\s*:\\s*([\\d,]+)"
        }
      ],
      "notes": "TEDIT Port Editor - port data"
    },
    {
      "id": "tedit.sector_editor",
      "kind": "menu",
      "input_type": "single_key",
      "match": {
        "pattern": "(?i)Sector Editor.*\\[Q\\]",
        "match_mode": "regex"
      },
      "kv_extract": [
        {
          "field": "warp_1",
          "type": "int",
          "regex": "<A>\\s*Warp 1\\s*:\\s*(\\d+)"
        },
        {
          "field": "warp_2",
          "type": "int",
          "regex": "<B>\\s*Warp 2\\s*:\\s*(\\d+)"
        },
        {
          "field": "warp_3",
          "type": "int",
          "regex": "<C>\\s*Warp 3\\s*:\\s*(\\d+)"
        },
        {
          "field": "navhaz",
          "type": "int",
          "regex": "<N>\\s*NavHaz\\s*:\\s*(\\d+)"
        }
      ],
      "notes": "TEDIT Sector Editor - sector connections"
    },
    {
      "id": "tedit.game_timing",
      "kind": "menu",
      "input_type": "single_key",
      "match": {
        "pattern": "(?i)Game Timing.*\\[Q\\]",
        "match_mode": "regex"
      },
      "notes": "TEDIT Game Timing Editor"
    },
    {
      "id": "tedit.user_list",
      "kind": "pause",
      "input_type": "any_key",
      "match": {
        "pattern": "(?i)#\\s+Trader Name\\s+Sect\\s+Fghtrs",
        "match_mode": "regex"
      },
      "notes": "TEDIT user list display"
    },
    {
      "id": "tedit.enter_number",
      "kind": "input",
      "input_type": "multi_key",
      "match": {
        "pattern": "(?i)(enter|input)\\s+(player|user|port|sector)\\s*(id|number|#)?\\s*[:\\?]?\\s*$",
        "match_mode": "regex"
      },
      "notes": "TEDIT numeric input prompt"
    },
    {
      "id": "tedit.enter_value",
      "kind": "input",
      "input_type": "multi_key",
      "match": {
        "pattern": "(?i)(new|enter)\\s+value\\s*[:\\?]?\\s*$",
        "match_mode": "regex"
      },
      "notes": "TEDIT value input prompt"
    },
    {
      "id": "tedit.confirm",
      "kind": "confirm",
      "input_type": "single_key",
      "match": {
        "pattern": "(?i)(are you sure|confirm|save changes)\\s*\\?\\s*\\(y/n\\)",
        "match_mode": "regex"
      },
      "notes": "TEDIT confirmation prompt"
    }
  ],
  "menus": [
    {
      "id": "menu.twgs_main",
      "prompt_match": {
        "pattern": "(?i)selection\\s*\\(.*\\)?:?\\s*$",
        "match_mode": "regex"
      },
      "options": [
        {
          "key": "A",
          "label": "My Game"
        },
        {
          "key": "#",
          "label": "Players Online"
        },
        {
          "key": "!",
          "label": "View game descriptions"
        },
        {
          "key": "Q",
          "label": "Quit"
        }
      ]
    },
    {
      "id": "menu.tedit_main",
      "prompt_match": {
        "pattern": "(?i)Trade Wars 2002.*Editor.*\\[\\?\\]",
        "match_mode": "regex"
      },
      "options": [
        {
          "key": "A",
          "label": "Aliens Editor"
        },
        {
          "key": "F",
          "label": "Ferrengi Editor"
        },
        {
          "key": "G",
          "label": "General Editor One"
        },
        {
          "key": "H",
          "label": "General Editor Two"
        },
        {
          "key": "I",
          "label": "General Editor Three"
        },
        {
          "key": "N",
          "label": "Planet Editor"
        },
        {
          "key": "P",
          "label": "Port Editor"
        },
        {
          "key": "S",
          "label": "Sector Editor"
        },
        {
          "key": "T",
          "label": "Corporation Editor"
        },
        {
          "key": "U",
          "label": "User Editor"
        },
        {
          "key": "V",
          "label": "Ship Editor"
        },
        {
          "key": "Y",
          "label": "Emulation Editor"
        },
        {
          "key": "Z",
          "label": "Game Timing Editor"
        },
        {
          "key": "B",
          "label": "Access Manager"
        },
        {
          "key": "R",
          "label": "Report Manager"
        },
        {
          "key": "1",
          "label": "Gold Ship Editor"
        },
        {
          "key": "2",
          "label": "Gold Planet Editor"
        },
        {
          "key": "3",
          "label": "Gold Alien Race Editor"
        },
        {
          "key": "4",
          "label": "Gold Active Aliens Editor"
        },
        {
          "key": "D",
          "label": "Remove derelict spacecraft"
        },
        {
          "key": "L",
          "label": "List current users"
        },
        {
          "key": "C",
          "label": "Add player to closed game"
        },
        {
          "key": "E",
          "label": "Repair Gold data"
        },
        {
          "key": "Q",
          "label": "Quit editor"
        }
      ]
    }
  ],
  "flows": []
}
